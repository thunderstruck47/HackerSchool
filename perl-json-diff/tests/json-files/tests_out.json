[
   {
      "src" : {},
      "comment" : "\"empty list, empty docs\"\n",
      "patch" : [],
      "dst" : {}
   },
   {
      "patch" : [],
      "comment" : "\"empty patch list\"\n",
      "src" : {
         "foo" : 1
      },
      "dst" : {
         "foo" : 1
      }
   },
   {
      "patch" : [],
      "comment" : "\"rearrangements OK?\"\n",
      "src" : {
         "foo" : 1,
         "bar" : 2
      },
      "dst" : {
         "bar" : 2,
         "foo" : 1
      }
   },
   {
      "patch" : [],
      "src" : [
         {
            "bar" : 2,
            "foo" : 1
         }
      ],
      "comment" : "\"rearrangements OK?  How about one level down ... array\"\n",
      "dst" : [
         {
            "bar" : 2,
            "foo" : 1
         }
      ]
   },
   {
      "patch" : [],
      "src" : {
         "foo" : {
            "foo" : 1,
            "bar" : 2
         }
      },
      "comment" : "\"rearrangements OK?  How about one level down...\"\n",
      "dst" : {
         "foo" : {
            "foo" : 1,
            "bar" : 2
         }
      }
   },
   {
      "dst" : {
         "foo" : 1
      },
      "src" : {
         "foo" : null
      },
      "comment" : "\"add replaces any existing field\"\n",
      "patch" : [
         {
            "op" : "replace",
            "old" : null,
            "value" : 1,
            "path" : "/foo"
         }
      ]
   },
   {
      "dst" : [
         "foo"
      ],
      "comment" : "\"toplevel array\"\n",
      "src" : [],
      "patch" : [
         {
            "op" : "add",
            "old" : null,
            "value" : "foo",
            "path" : "/0"
         }
      ]
   },
   {
      "dst" : [
         "foo"
      ],
      "patch" : [],
      "comment" : "\"toplevel array, no change\"\n",
      "src" : [
         "foo"
      ]
   },
   {
      "patch" : [
         {
            "path" : "/foo",
            "op" : "add",
            "value" : "1"
         }
      ],
      "comment" : "\"toplevel object, numeric string\"\n",
      "src" : {},
      "dst" : {
         "foo" : "1"
      }
   },
   {
      "dst" : {
         "foo" : 1
      },
      "comment" : "\"toplevel object, integer\"\n",
      "src" : {},
      "patch" : [
         {
            "op" : "add",
            "value" : 1,
            "path" : "/foo"
         }
      ]
   },
   {
      "comment" : "\"replace object document with array document?\"\n",
      "src" : {},
      "patch" : [
         {
            "path" : "",
            "old" : {},
            "value" : [],
            "op" : "replace"
         }
      ],
      "dst" : []
   },
   {
      "dst" : {},
      "src" : [],
      "comment" : "\"replace array document with object document?\"\n",
      "patch" : [
         {
            "path" : "",
            "old" : [],
            "value" : {},
            "op" : "replace"
         }
      ]
   },
   {
      "dst" : [
         "hi"
      ],
      "src" : [],
      "comment" : "\"append to root array document?\"\n",
      "patch" : [
         {
            "op" : "add",
            "old" : null,
            "value" : "hi",
            "path" : "/0"
         }
      ]
   },
   {
      "dst" : {
         "" : 1
      },
      "comment" : "\"Add, / target\"\n",
      "src" : {},
      "patch" : [
         {
            "path" : "/",
            "value" : 1,
            "op" : "add"
         }
      ]
   },
   {
      "src" : {
         "foo" : {}
      },
      "comment" : "\"Add, /foo/ deep target (trailing slash)\"\n",
      "patch" : [
         {
            "op" : "add",
            "value" : 1,
            "path" : "/foo/"
         }
      ],
      "dst" : {
         "foo" : {
            "" : 1
         }
      }
   },
   {
      "dst" : {
         "bar" : [
            1,
            2
         ],
         "foo" : 1
      },
      "src" : {
         "foo" : 1
      },
      "comment" : "\"Add composite value at top level\"\n",
      "patch" : [
         {
            "path" : "/bar",
            "value" : [
               1,
               2
            ],
            "op" : "add"
         }
      ]
   },
   {
      "src" : {
         "foo" : 1,
         "baz" : [
            {
               "qux" : "hello"
            }
         ]
      },
      "comment" : "\"Add into composite value\"\n",
      "patch" : [
         {
            "path" : "/baz/0",
            "old" : {
               "qux" : "hello"
            },
            "value" : {
               "foo" : "world",
               "qux" : "hello"
            },
            "op" : "add"
         },
         {
            "old" : {
               "qux" : "hello"
            },
            "op" : "remove",
            "path" : "/baz/1"
         }
      ],
      "dst" : {
         "foo" : 1,
         "baz" : [
            {
               "qux" : "hello",
               "foo" : "world"
            }
         ]
      }
   },
   {
      "dst" : {
         "bar" : true,
         "foo" : 1
      },
      "src" : {
         "foo" : 1
      },
      "comment" : "null\n",
      "patch" : [
         {
            "value" : true,
            "op" : "add",
            "path" : "/bar"
         }
      ]
   },
   {
      "comment" : "null\n",
      "src" : {
         "foo" : 1
      },
      "patch" : [
         {
            "path" : "/bar",
            "value" : false,
            "op" : "add"
         }
      ],
      "dst" : {
         "bar" : false,
         "foo" : 1
      }
   },
   {
      "patch" : [
         {
            "value" : null,
            "op" : "add",
            "path" : "/bar"
         }
      ],
      "src" : {
         "foo" : 1
      },
      "comment" : "null\n",
      "dst" : {
         "foo" : 1,
         "bar" : null
      }
   },
   {
      "comment" : "\"0 can be an array index or object element name\"\n",
      "src" : {
         "foo" : 1
      },
      "patch" : [
         {
            "value" : "bar",
            "op" : "add",
            "path" : "/0"
         }
      ],
      "dst" : {
         "0" : "bar",
         "foo" : 1
      }
   },
   {
      "src" : [
         "foo"
      ],
      "comment" : "null\n",
      "patch" : [
         {
            "op" : "add",
            "value" : "bar",
            "old" : null,
            "path" : "/1"
         }
      ],
      "dst" : [
         "foo",
         "bar"
      ]
   },
   {
      "comment" : "null\n",
      "src" : [
         "foo",
         "sil"
      ],
      "patch" : [
         {
            "op" : "add",
            "value" : "bar",
            "old" : null,
            "path" : "/1"
         }
      ],
      "dst" : [
         "foo",
         "bar",
         "sil"
      ]
   },
   {
      "dst" : [
         "bar",
         "foo",
         "sil"
      ],
      "src" : [
         "foo",
         "sil"
      ],
      "comment" : "null\n",
      "patch" : [
         {
            "value" : "bar",
            "old" : null,
            "op" : "add",
            "path" : "/0"
         }
      ]
   },
   {
      "dst" : [
         "foo",
         "sil",
         "bar"
      ],
      "patch" : [
         {
            "path" : "/2",
            "op" : "add",
            "value" : "bar",
            "old" : null
         }
      ],
      "comment" : "\"push item to array via last index + 1\"\n",
      "src" : [
         "foo",
         "sil"
      ]
   },
   {
      "dst" : {
         "1e0" : "foo"
      },
      "patch" : [],
      "comment" : "\"test against implementation-specific numeric parsing\"\n",
      "src" : {
         "1e0" : "foo"
      }
   },
   {
      "patch" : [
         {
            "op" : "add",
            "old" : null,
            "value" : [
               "bar",
               "baz"
            ],
            "path" : "/1"
         }
      ],
      "src" : [
         "foo",
         "sil"
      ],
      "comment" : "\"value in array add not flattened\"\n",
      "dst" : [
         "foo",
         [
            "bar",
            "baz"
         ],
         "sil"
      ]
   },
   {
      "dst" : {
         "foo" : 1
      },
      "src" : {
         "bar" : [
            1,
            2,
            3,
            4
         ],
         "foo" : 1
      },
      "comment" : "null\n",
      "patch" : [
         {
            "op" : "remove",
            "old" : {
               "foo" : 1,
               "bar" : [
                  1,
                  2,
                  3,
                  4
               ]
            },
            "path" : "/bar"
         }
      ]
   },
   {
      "patch" : [
         {
            "path" : "/baz/0",
            "op" : "add",
            "value" : {},
            "old" : {
               "qux" : "hello"
            }
         },
         {
            "op" : "remove",
            "old" : {
               "qux" : "hello"
            },
            "path" : "/baz/1"
         }
      ],
      "src" : {
         "foo" : 1,
         "baz" : [
            {
               "qux" : "hello"
            }
         ]
      },
      "comment" : "null\n",
      "dst" : {
         "foo" : 1,
         "baz" : [
            {}
         ]
      }
   },
   {
      "dst" : {
         "baz" : [
            {
               "qux" : "hello"
            }
         ],
         "foo" : [
            1,
            2,
            3,
            4
         ]
      },
      "src" : {
         "foo" : 1,
         "baz" : [
            {
               "qux" : "hello"
            }
         ]
      },
      "comment" : "null\n",
      "patch" : [
         {
            "path" : "/foo",
            "op" : "replace",
            "value" : [
               1,
               2,
               3,
               4
            ],
            "old" : 1
         }
      ]
   },
   {
      "patch" : [
         {
            "path" : "/baz/0",
            "value" : {
               "qux" : "world"
            },
            "old" : {
               "qux" : "hello"
            },
            "op" : "add"
         },
         {
            "path" : "/baz/1",
            "op" : "remove",
            "old" : {
               "qux" : "hello"
            }
         }
      ],
      "src" : {
         "baz" : [
            {
               "qux" : "hello"
            }
         ],
         "foo" : [
            1,
            2,
            3,
            4
         ]
      },
      "comment" : "null\n",
      "dst" : {
         "foo" : [
            1,
            2,
            3,
            4
         ],
         "baz" : [
            {
               "qux" : "world"
            }
         ]
      }
   },
   {
      "comment" : "null\n",
      "src" : [
         "foo"
      ],
      "patch" : [
         {
            "path" : "/0",
            "old" : "foo",
            "value" : "bar",
            "op" : "add"
         },
         {
            "path" : "/1",
            "old" : "foo",
            "op" : "remove"
         }
      ],
      "dst" : [
         "bar"
      ]
   },
   {
      "patch" : [
         {
            "path" : "/0",
            "value" : 0,
            "old" : "",
            "op" : "add"
         },
         {
            "op" : "remove",
            "old" : "",
            "path" : "/1"
         }
      ],
      "src" : [
         ""
      ],
      "comment" : "null\n",
      "dst" : [
         0
      ]
   },
   {
      "patch" : [
         {
            "path" : "/0",
            "old" : "",
            "value" : true,
            "op" : "add"
         },
         {
            "path" : "/1",
            "op" : "remove",
            "old" : ""
         }
      ],
      "src" : [
         ""
      ],
      "comment" : "null\n",
      "dst" : [
         true
      ]
   },
   {
      "patch" : [
         {
            "op" : "add",
            "old" : "",
            "value" : false,
            "path" : "/0"
         },
         {
            "op" : "remove",
            "old" : "",
            "path" : "/1"
         }
      ],
      "comment" : "null\n",
      "src" : [
         ""
      ],
      "dst" : [
         false
      ]
   },
   {
      "dst" : [
         null
      ],
      "patch" : [
         {
            "value" : null,
            "old" : "",
            "op" : "add",
            "path" : "/0"
         },
         {
            "path" : "/1",
            "op" : "remove",
            "old" : ""
         }
      ],
      "comment" : "null\n",
      "src" : [
         ""
      ]
   },
   {
      "comment" : "\"value in array replace not flattened\"\n",
      "src" : [
         "foo",
         "sil"
      ],
      "patch" : [
         {
            "op" : "add",
            "value" : [
               "bar",
               "baz"
            ],
            "old" : "sil",
            "path" : "/1"
         },
         {
            "path" : "/2",
            "old" : "sil",
            "op" : "remove"
         }
      ],
      "dst" : [
         "foo",
         [
            "bar",
            "baz"
         ]
      ]
   },
   {
      "dst" : {
         "baz" : "qux"
      },
      "comment" : "\"replace whole document\"\n",
      "src" : {
         "foo" : "bar"
      },
      "patch" : [
         {
            "op" : "remove",
            "old" : {
               "foo" : "bar"
            },
            "path" : "/foo"
         },
         {
            "op" : "add",
            "value" : "qux",
            "path" : "/baz"
         }
      ]
   },
   {
      "dst" : {
         "foo" : 1
      },
      "src" : {
         "foo" : 1
      },
      "comment" : "\"spurious patch properties\"\n",
      "patch" : []
   },
   {
      "dst" : {
         "foo" : "truthy"
      },
      "src" : {
         "foo" : null
      },
      "comment" : "\"null value should be valid obj property to be replaced with something truthy\"\n",
      "patch" : [
         {
            "path" : "/foo",
            "op" : "replace",
            "value" : "truthy",
            "old" : null
         }
      ]
   },
   {
      "dst" : {
         "bar" : null
      },
      "patch" : [
         {
            "path" : "/foo",
            "old" : {
               "foo" : null
            },
            "op" : "remove"
         },
         {
            "op" : "add",
            "value" : null,
            "path" : "/bar"
         }
      ],
      "comment" : "\"null value should be valid obj property to be moved\"\n",
      "src" : {
         "foo" : null
      }
   },
   {
      "dst" : {
         "foo" : null,
         "bar" : null
      },
      "comment" : "\"null value should be valid obj property to be copied\"\n",
      "src" : {
         "foo" : null
      },
      "patch" : [
         {
            "path" : "/bar",
            "value" : null,
            "op" : "add"
         }
      ]
   },
   {
      "comment" : "\"null value should be valid obj property to be removed\"\n",
      "src" : {
         "foo" : null
      },
      "patch" : [
         {
            "op" : "remove",
            "old" : {
               "foo" : null
            },
            "path" : "/foo"
         }
      ],
      "dst" : {}
   },
   {
      "patch" : [
         {
            "value" : null,
            "old" : "bar",
            "op" : "replace",
            "path" : "/foo"
         }
      ],
      "src" : {
         "foo" : "bar"
      },
      "comment" : "\"null value should still be valid obj property replace other value\"\n",
      "dst" : {
         "foo" : null
      }
   },
   {
      "dst" : {
         "foo" : 1
      },
      "src" : {
         "foo" : 1
      },
      "comment" : "\"Move to same location has no effect\"\n",
      "patch" : []
   },
   {
      "dst" : {
         "bar" : 1,
         "baz" : [
            {
               "qux" : "hello"
            }
         ]
      },
      "comment" : "null\n",
      "src" : {
         "foo" : 1,
         "baz" : [
            {
               "qux" : "hello"
            }
         ]
      },
      "patch" : [
         {
            "path" : "/foo",
            "op" : "remove",
            "old" : {
               "baz" : [
                  {
                     "qux" : "hello"
                  }
               ],
               "foo" : 1
            }
         },
         {
            "op" : "add",
            "value" : 1,
            "path" : "/bar"
         }
      ]
   },
   {
      "patch" : [
         {
            "path" : "/baz/0",
            "op" : "add",
            "old" : null,
            "value" : {}
         },
         {
            "path" : "/baz/1",
            "op" : "add",
            "old" : {
               "qux" : "hello"
            },
            "value" : "hello"
         },
         {
            "path" : "/baz/2",
            "op" : "remove",
            "old" : {
               "qux" : "hello"
            }
         }
      ],
      "src" : {
         "bar" : 1,
         "baz" : [
            {
               "qux" : "hello"
            }
         ]
      },
      "comment" : "null\n",
      "dst" : {
         "baz" : [
            {},
            "hello"
         ],
         "bar" : 1
      }
   },
   {
      "patch" : [
         {
            "path" : "/boo",
            "op" : "add",
            "value" : {
               "qux" : "hello"
            }
         }
      ],
      "comment" : "null\n",
      "src" : {
         "baz" : [
            {
               "qux" : "hello"
            }
         ],
         "bar" : 1
      },
      "dst" : {
         "bar" : 1,
         "boo" : {
            "qux" : "hello"
         },
         "baz" : [
            {
               "qux" : "hello"
            }
         ]
      }
   },
   {
      "patch" : [
         {
            "old" : {
               "foo" : "bar"
            },
            "op" : "remove",
            "path" : "/foo"
         },
         {
            "op" : "add",
            "value" : "qux",
            "path" : "/baz"
         }
      ],
      "comment" : "\"replacing the root of the document is possible with add\"\n",
      "src" : {
         "foo" : "bar"
      },
      "dst" : {
         "baz" : "qux"
      }
   },
   {
      "src" : [
         1,
         2
      ],
      "comment" : "\"Adding to \\\"/-\\\" adds to the end of the array\"\n",
      "patch" : [
         {
            "value" : {
               "foo" : [
                  "bar",
                  "baz"
               ]
            },
            "old" : null,
            "op" : "add",
            "path" : "/2"
         }
      ],
      "dst" : [
         1,
         2,
         {
            "foo" : [
               "bar",
               "baz"
            ]
         }
      ]
   },
   {
      "dst" : [
         1,
         2,
         [
            3,
            [
               4,
               5,
               {
                  "foo" : [
                     "bar",
                     "baz"
                  ]
               }
            ]
         ]
      ],
      "src" : [
         1,
         2,
         [
            3,
            [
               4,
               5
            ]
         ]
      ],
      "comment" : "\"Adding to \\\"/-\\\" adds to the end of the array, even n levels down\"\n",
      "patch" : [
         {
            "path" : "/2",
            "op" : "add",
            "value" : [
               3,
               [
                  4,
                  5,
                  {
                     "foo" : [
                        "bar",
                        "baz"
                     ]
                  }
               ]
            ],
            "old" : [
               3,
               [
                  4,
                  5
               ]
            ]
         },
         {
            "path" : "/3",
            "old" : [
               3,
               [
                  4,
                  5
               ]
            ],
            "op" : "remove"
         }
      ]
   },
   {
      "dst" : [
         2,
         3,
         4
      ],
      "comment" : "\"test remove on array\"\n",
      "src" : [
         1,
         2,
         3,
         4
      ],
      "patch" : [
         {
            "op" : "add",
            "value" : 2,
            "old" : 2,
            "path" : "/0"
         },
         {
            "op" : "add",
            "value" : 3,
            "old" : 2,
            "path" : "/1"
         },
         {
            "path" : "/2",
            "op" : "add",
            "old" : 1,
            "value" : 4
         },
         {
            "old" : 4,
            "op" : "remove",
            "path" : "/6"
         },
         {
            "path" : "/5",
            "op" : "remove",
            "old" : 3
         },
         {
            "old" : 2,
            "op" : "remove",
            "path" : "/4"
         },
         {
            "path" : "/3",
            "old" : 1,
            "op" : "remove"
         }
      ]
   },
   {
      "dst" : [
         1,
         3
      ],
      "patch" : [
         {
            "path" : "/1",
            "old" : 2,
            "value" : 3,
            "op" : "add"
         },
         {
            "op" : "remove",
            "old" : 4,
            "path" : "/4"
         },
         {
            "path" : "/3",
            "old" : 3,
            "op" : "remove"
         },
         {
            "op" : "remove",
            "old" : 2,
            "path" : "/2"
         }
      ],
      "comment" : "\"test repeated removes\"\n",
      "src" : [
         1,
         2,
         3,
         4
      ]
   },
   {
      "patch" : [
         {
            "path" : "/FOO",
            "op" : "add",
            "value" : "BAR"
         }
      ],
      "src" : {
         "foo" : "bar"
      },
      "comment" : "\"Patch with different capitalisation than doc\"\n",
      "dst" : {
         "foo" : "bar",
         "FOO" : "BAR"
      }
   }
]
